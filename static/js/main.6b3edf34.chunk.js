(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{165:function(e,t,a){e.exports=a.p+"static/media/logo.9ec24611.svg"},166:function(e,t,a){e.exports=a.p+"static/media/profile.34ddb725.svg"},196:function(e,t,a){e.exports=a(383)},201:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),l=a.n(c),i=(a(201),a(41)),o=a(49),u=a(9),m=a(11),s=a.n(m),p=a(27),d=a(44),f=a(95),E=a.n(f),b=function(e,t){if(e&&t)return E.a.post("".concat("https://bookifyru.herokuapp.com","/api/auth/login"),{email:e,password:t}).then((function(e){return e})).catch((function(e){return{error:e}}))},h=Object(d.b)({name:"auth",initialState:{user:null,isAuthenticated:!1},reducers:{setUser:function(e,t){e.user=t.payload.user,e.isAuthenticated=!0},logout:function(e){e.user=null,e.isAuthenticated=!1}}}),g=h.actions.setUser,v=function(e){return e.auth.isAuthenticated},y=function(e){return e.auth.user},O=h.reducer,j=a(390),x=a(385),w=a(131),k=a(179),N=a(24),F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return E.a.get("".concat("https://bookifyru.herokuapp.com","/api/products/findAll?s=").concat(e)).then((function(e){return e})).catch((function(e){return{error:e}}))},I=Object(d.b)({name:"catalog",initialState:{items:[],query:"",selected:null},reducers:{setItems:function(e,t){e.items=t.payload.items},setSelected:function(e,t){e.selected=t.payload.item},setQuery:function(e,t){e.query=t.payload.query}}}),T=I.actions,W=T.setItems,S=T.setQuery,q=(T.setSelected,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){var t=Object(p.a)(s.a.mark((function t(a){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("string"!==typeof e){t.next=9;break}return t.next=3,F(e);case 3:if(!(n=t.sent).error){t.next=7;break}return console.log(n.error),t.abrupt("return");case 7:a(W({items:n.data})),a(S({query:e}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),C=function(e){return e.catalog.items},P=I.reducer,A=a(165),U=a.n(A),B=a(166),J=a.n(B),M=j.a.Search;function Q(){var e=Object(u.c)(v),t=Object(u.b)();return r.a.createElement(x.a,{title:r.a.createElement(N.b,{to:"/"},"Bookify"),subTitle:"\u041a\u043d\u0438\u0433\u0438 \u0435\u0441\u0442\u044c",extra:[r.a.createElement(M,{placeholder:"\u041f\u043e\u0438\u0441\u043a",onSearch:function(e){return function(e){t(q(e))}(e)},style:{width:200,marginRight:"auto"}}),r.a.createElement("span",{key:"1"},e?r.a.createElement(r.a.Fragment,null,r.a.createElement(N.b,{to:"/cart"},r.a.createElement(w.a,{type:"primary"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430")),r.a.createElement(N.b,{to:"/profile",key:"2"},r.a.createElement(k.a,{src:J.a}))):r.a.createElement(N.b,{to:"/login"},r.a.createElement(w.a,{type:"primary"},"\u0412\u043e\u0439\u0442\u0438")))],avatar:{src:U.a}})}var R=a(33),z=Object(R.a)({container:{maxWidth:"1200px",padding:"0 15px",margin:"0 auto"}});function V(e){var t=e.children,a=z();return r.a.createElement("div",{className:a.container},t)}var $=a(387),D=a(386),G=a(8),H=Object(d.b)({name:"cart",initialState:{items:[]},reducers:{addItem:function(e,t){e.items=[].concat(Object(G.a)(e.items),[t.payload.item])},removeItem:function(e,t){e.items=e.items.filter((function(e){return e===t.payload.id}))}}}),K=H.actions,L=K.removeItem,X=K.addItem,Y=function(e){return e.cart.items},Z=H.reducer,_=D.a.Meta,ee=$.a.Title,te=Object(R.a)({cardWrapper:{margin:"5px",width:240},cardImg:{height:"200px",objectFit:"contain"},cardPrice:{marginTop:"5px"},cardTitle:{textOverflow:"clip"}});function ae(e){var t=e.data,a=e.type,n=Object(o.g)(),c=te(),l=Object(u.c)(Y),i=Object(u.c)(v),m=Object(u.b)(),d=function(e){var n,r;e.stopPropagation(),"catalog"===a&&m((n=t,function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.hasOwnProperty("id")&&n.hasOwnProperty("title")&&t(X({item:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),"cart"===a&&m((r=t,function(){var e=Object(p.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r instanceof Number&&t(L({id:r}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return r.a.createElement(D.a,{hoverable:!0,className:c.cardWrapper,cover:r.a.createElement("img",{alt:"card image",src:t.imageUrl,className:c.cardImg}),onClick:function(e){n.push("/catalog/".concat(t.id))}},r.a.createElement(_,{className:c.cardTitle,title:t.title,description:t.description}),r.a.createElement(ee,{className:c.cardPrice,level:4},"\u0426\u0435\u043d\u0430: ",t.price),i&&r.a.createElement(r.a.Fragment,null,void 0!==l.find((function(e){return e.id==t.id}))?r.a.createElement(w.a,{type:"primary",onClick:d,disabled:!0},"\u0423\u0436\u0435 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435"):r.a.createElement(w.a,{type:"primary",onClick:d},"catalog"===a&&"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443","cart"===a&&"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))}var ne=$.a.Text,re=Object(R.a)({gridWrapper:{height:"100%",display:"flex",flexWrap:"wrap"}});function ce(e){var t=e.data,a=void 0===t?[]:t,n=e.type,c=re();return r.a.createElement("div",{className:c.gridWrapper},a.length?a.map((function(e){return r.a.createElement(ae,{data:e,key:e.id,type:n})})):r.a.createElement(ne,null,"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"))}function le(){var e=Object(u.c)(C),t=(Object(u.c)(C),Object(u.b)());return r.a.useEffect((function(){t(q())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(V,null,r.a.createElement(ce,{data:e,type:"catalog"})))}var ie=a(69),oe=a(31),ue=a(388),me={labelCol:{span:8},wrapperCol:{span:16}},se={wrapperCol:{offset:8,span:16}},pe=Object(R.a)({form:{marginTop:"50px"}});function de(){var e=Object(u.b)(),t=Object(u.c)(v),a=Object(o.g)(),n=pe();r.a.useEffect((function(){t&&a.push("/")}));return r.a.createElement(V,null,r.a.createElement(ie.a,null,r.a.createElement(oe.a,{span:12,offset:6},r.a.createElement(ue.a,Object.assign({},me,{name:"basic",initialValues:{remember:!0},onFinish:function(t){var a=t.email,n=t.password;e(function(e,t){return function(){var a=Object(p.a)(s.a.mark((function a(n){var r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b(e,t);case 2:if(!(r=a.sent).error){a.next=5;break}return a.abrupt("return");case 5:n(g({user:r.data}));case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(a,n))},onFinishFailed:function(e){console.log("Failed:",e)},className:n.form}),r.a.createElement(ue.a.Item,{label:"\u041f\u043e\u0447\u0442\u0430",name:"email",rules:[{required:!0,type:"email",message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0443 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"}]},r.a.createElement(j.a,null)),r.a.createElement(ue.a.Item,{label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",rules:[{required:!0,message:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c"}]},r.a.createElement(j.a.Password,null)),r.a.createElement(ue.a.Item,se,r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"\u0412\u0445\u043e\u0434"))))))}var fe=a(389),Ee=$.a.Text,be=[{path:"profile",breadcrumbName:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}],he=Object(R.a)({label:{marginRight:"15px"},labelWrapper:{marginTop:"15px"}});function ge(){var e=Object(u.c)(y),t=he();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{routes:be}),r.a.createElement(V,null,r.a.createElement("div",{className:t.labelWrapper},r.a.createElement(k.a,{size:"large",icon:r.a.createElement(fe.a,null)})),r.a.createElement("div",{className:t.labelWrapper},r.a.createElement(Ee,{className:t.label},"\u0418\u043c\u044f"),r.a.createElement(Ee,{strong:!0},e.username)),r.a.createElement("div",{className:t.labelWrapper},r.a.createElement(Ee,{className:t.label},"\u041f\u043e\u0447\u0442\u0430"),r.a.createElement(Ee,{strong:!0},e.email))))}var ve=a(64),ye=$.a.Title,Oe=$.a.Text;function je(){var e=r.a.useState(null),t=Object(ve.a)(e,2),a=t[0],n=t[1],c=Object(o.h)().id,l=Object(u.c)(C),i=Object(u.c)(v);return r.a.useEffect((function(){n(l.find((function(e){return e.id==c})))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(V,null,a&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{src:a.imageUrl}),r.a.createElement("div",null,r.a.createElement(ye,{level:4},"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"),r.a.createElement(Oe,null,a.title),r.a.createElement(ye,{level:4},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(Oe,null,a.description),r.a.createElement(ye,{level:4},"\u0426\u0435\u043d\u0430"),r.a.createElement(Oe,null,a.price)),i&&r.a.createElement(w.a,{type:"primary"},"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))))}function xe(){var e=Object(u.c)(Y);return r.a.useEffect((function(){console.log(e)})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(V,null,e?r.a.createElement(ce,{data:e,type:"cart"}):"\u041d\u0435\u0442 \u0434\u0430\u043d\u043d\u044b\u0445"))}function we(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/"},r.a.createElement(o.a,{to:"/catalog"})),r.a.createElement(o.b,{exact:!0,path:"/login"},r.a.createElement(de,null)),r.a.createElement(o.b,{exact:!0,path:"/catalog"},r.a.createElement(le,null)),r.a.createElement(o.b,{path:"/catalog/:id"},r.a.createElement(je,null)),r.a.createElement(ke,{path:"/cart"},r.a.createElement(xe,null)),r.a.createElement(ke,{path:"/profile"},r.a.createElement(ge,null)),r.a.createElement(o.b,{path:"*"},r.a.createElement("div",null,"404")))}function ke(e){var t=e.children,a=Object(i.a)(e,["children"]),n=Object(u.c)(v);return r.a.createElement(o.b,Object.assign({},a,{render:function(e){var a=e.location;return n?t:r.a.createElement(o.a,{to:{pathname:"/login",state:{from:a}}})}}))}var Ne=Object(d.a)({reducer:{cart:Z,catalog:P,auth:O}});a(382);var Fe=function(){return r.a.createElement(N.a,null,r.a.createElement(u.a,{store:Ne},r.a.createElement(we,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[196,1,2]]]);
//# sourceMappingURL=main.6b3edf34.chunk.js.map